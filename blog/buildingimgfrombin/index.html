


















<!DOCTYPE html>
<html lang="en">

<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/jpg" href="https:&#x2F;&#x2F;branding.ewpratten.com&#x2F;pfp&#x2F;2022&#x2F;460x460.webp" />
    
<link rel="canonical" href="https:&#x2F;&#x2F;ewpratten.com&#x2F;blog&#x2F;buildingimgfrombin&#x2F;" />


<link rel="alternate" type="application/rss+xml" title="RSS" href="https://ewpratten.com/rss.xml">
    
<meta name="twitter:card" content="summary" />
<meta name="og:site" content="ewpratten.com" />
<meta name="og:site_name" content="Evan Pratten" />


<meta name="og:image"
    content="https:&#x2F;&#x2F;branding.ewpratten.com&#x2F;pfp&#x2F;2022&#x2F;460x460.webp" />


<meta property="og:description" content="Simple, yet fun" />
<meta property="description" content="Simple, yet fun" />
<meta name="description" content="Simple, yet fun">


<meta property="og:title" content="Building images from binary data - Evan Pratten" />



<meta property="og:type" content="article" />





    
    

    
    <title>Building images from binary data | Evan Pratten</title>

    
    <link rel="stylesheet" href="/global.css">

    
    <link rel="stylesheet" href="/dist/github-markdown-css/github-markdown-light.css" lazyload>
    <link rel="stylesheet" href="/styles/bootstrap.css" lazyload>
    <link rel="stylesheet" href="/styles/typography.css">

    
    
    

    
    









<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>






</head>

<body>

    
    <div class="page">

        
        


    
<link rel="stylesheet" href="/styles/components/heading-card.css">


<div class="heading-card">
    <div class="profile-photo-container">
        <img src="https:&#x2F;&#x2F;branding.ewpratten.com&#x2F;pfp&#x2F;2022&#x2F;460x460.webp" alt="Profile Photo"  loading="lazy">
    </div>
    <div class="text-container">
        <h1>Evan Pratten</h1>
        <p>Software Developer</p>
    </div>
</div>


        
        <div class="container">
            

    
<link rel="stylesheet" href="/styles/components/navbar.css">


<div class="ewp-navbar">
    <hr>
    <ul class="navbar-items">
        <li><a href="/">Home</a></li>
        <li class="separator">|</li>
        <li><a href="/timeline">Timeline</a></li>
        <li class="separator">|</li>
        <li class="dropdown-center">
            <a href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                More
            </a>
            <ul class="dropdown-menu">
                
                
                <li><a class="dropdown-item" href="/photography">Photography</a></li>
                <li><a class="dropdown-item" href="/contact">Contact</a></li>
            </ul>
        </li>
        
    </ul>
    <hr>
</div>
        </div>

        
        <article id="content" class="container markdown-body">
            
<h1 style="margin-bottom:0;padding-bottom:0;">Building images from binary data</h1>
<em>Simple, yet fun</em>
<br><br>

<p>During a computer science class today, we were talking about embedding code and metadata in <em>jpg</em> and <em>bmp</em> files. @exvacuum was showing off a program he wrote that watched a directory for new image files, and would display them on a canvas. He then showed us a special image. In this image, he had injected some metadata into the last few pixels, which were not rendered, but told his program where to position the image on the canvas, and it's size.</p>
<p>This demo got @hyperliskdev and I thinking about what else we can do with image data. After some talk, the idea of converting application binaries to images came up. I had seen a blog post about visually decoding <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/On%E2%80%93off_keying">OOK data</a> by converting an <a rel="noopener" target="_blank" href="http://www.ni.com/tutorial/4805/en/">IQ capture</a> to an image. With a little adaptation, I did the same for a few binaries on my laptop.</p>
<!-- Tweet embed -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I present: &quot;Parts of <a href="https://twitter.com/GIMP_Official?ref_src=twsrc%5Etfw">@GIMP_Official</a>&#39;s binary, represented as a bitmap&quot; <a href="https://t.co/iLljdE4nlK">pic.twitter.com/iLljdE4nlK</a></p>&mdash; Evan Pratten (@ewpratten) <a href="https://twitter.com/ewpratten/status/1171801959197794304?ref_src=twsrc%5Etfw">September 11, 2019</a></blockquote> 
<h2 id="program-design">Program design</h2>
<p>Like all ideas I have, I wrote some code to test this idea out. Above is a small sample of the interesting designs found in the <a rel="noopener" target="_blank" href="https://www.gimp.org/">gimp</a> binary. The goals for this script were to:</p>
<ul>
<li>Accept any file of any type or size</li>
<li>Allow the user to select the file dimensions</li>
<li>Generate an image</li>
<li>Write the data in a common image format</li>
</ul>
<p>If you would like to see how the code works, read &quot;<em>check out the script</em>&quot;.</p>
<h2 id="a-note-on-data-wrapping">A note on data wrapping</h2>
<p>By using a <a rel="noopener" target="_blank" href="https://wiki.python.org/moin/Generators">generator</a>, and the <a rel="noopener" target="_blank" href="https://docs.python.org/3/library/functions.html#func-range">range function</a>'s 3rd argument, any list can be easily split into a 2d list at a set interval.</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#65737e;"># Assuming l is a list of data, and n is an int that denotes the desired split location
</span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#96b5b4;">len</span><span>(l), n):
</span><span>    </span><span style="color:#b48ead;">yield </span><span>l[i:i + n]
</span></code></pre>
<h3 id="binaries-have-a-habit-of-not-being-rectangular">Binaries have a habit of not being rectangular</h3>
<p>Unlike photos, binaries are not generated from rectangular image sensors, but instead from compilers and assemblers (and sometimes hand-written binary). These do not generate perfect rectangles. Due to this, my script simply removes the last line from the image to &quot;reshape&quot; it. I may end up adding a small piece of code to pad the final line instead of stripping it in the future.</p>
<h2 id="other-file-types">Other file types</h2>
<p>I also looked at other file types. Binaries are very interesting because they follow very strict ordering rules. I was hoping that a <code>wav</code> file would do something similar, but that does not appear to be the case. This is the most interesting pattern I could find in a <code>wav</code> file:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Following up my previous post with a tiny segment of an audio file. This one is little less interesting <a href="https://t.co/u9EFloxnK5">pic.twitter.com/u9EFloxnK5</a></p>&mdash; Evan Pratten (@ewpratten) <a href="https://twitter.com/ewpratten/status/1171883910827040774?ref_src=twsrc%5Etfw">September 11, 2019</a></blockquote> 
<p>Back to executable data, these are small segments of a <code>dll</code> file:</p>
<p><img src="/images/posts/bin-images/dll.png" alt="Segment 1" /></p>
<p><img src="/images/posts/bin-images/dll2.png" alt="Segment 2" /></p>
<h2 id="check-out-the-script">Check out the script</h2>
<p>This script is hosted <a rel="noopener" target="_blank" href="https://github.com/Ewpratten/binmap">on my GitHub account</a> as a standalone file. Any version of python3 should work, but the following libraries are needed:</p>
<ul>
<li>Pillow</li>
<li>Numpy</li>
</ul>


        </article>

        
        

    
<link rel="stylesheet" href="/styles/components/footer.css">


<div class="footer">
    <br>
    <span class="gray">-- EOF --</span>
    <p>
        Site design & content by: <a href="/contact">Evan Pratten</a><br>
        Consider <a href="/donate" target="_blank">supporting my work</a> if you like what you see<br>
    </p>
</div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script defer src="https://www.googletagmanager.com/gtag/js?id=G-5912H4H03P"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-5912H4H03P');
</script>
</body>

</html>